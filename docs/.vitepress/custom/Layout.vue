<script setup lang="ts">
import Docs from './Docs.vue'
import { useData } from 'vitepress'
import SearchTrigger from '../components/SearchTrigger.vue'
import Navbar from '../components/Navbar.vue'
// import HomePageDemo from '../components/HomePageDemo.vue'
import Home from '../components/Home.vue'
import { useScroll } from '@vueuse/core'
import { toRefs, watch } from 'vue'
import { useI18n } from 'vue-i18n'
import Showcase from './Showcase.vue'

const { site, theme, frontmatter, lang } = useData()
const { arrivedState } = useScroll(globalThis.window)
const { top } = toRefs(arrivedState)

const { locale } = useI18n()

watch(lang, (newLang) => {
  locale.value = newLang
}, {
  immediate: true,
})
</script>

<template>
  <div class="flex flex-col items-center min-h-screen h-full">
    <div class="absolute z-0 top-0 inset-x-0 flex justify-center overflow-hidden pointer-events-none">
      <div class="w-[108rem] flex-none flex justify-end">
        <img
          src="/bg.png"
          alt="Backdrop flare"
          class="w-[64rem] flex-none max-w-none -mt-6"
        >
      </div>
    </div>

    <header
      class="max-w-[1440px] w-full py-4 flex items-center justify-between sticky top-0 z-10 transition-all duration-500 px-6 h-[68px] md:h-full"
      :class="[top ? 'bg-transparent backdrop-blur-0' : 'bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/90']"
    >
      <div class="w-full justify-between md:justify-normal flex items-center gap-8">
        <a
          href="/"
          class="flex items-center gap-2"
        >
          <img
            class="w-6 md:w-9"
            alt="Radix Vue logo"
            :src="theme.logo"
          >
          <span class="font-bold text-xl md:text-2xl">{{ site.title }}</span>
        </a>
        <SearchTrigger />
      </div>

      <Navbar />
    </header>

    <div
      v-if="frontmatter.layout === 'home'"
      class="max-w-[1440px]  px-6 h-full flex flex-col justify-between flex-1 w-full"
    >
      <main>
        <Home />
      <!-- <Content /> -->
      </main>

      <!-- <footer class="py-4">
        footer
      </footer> -->
    </div>

    <div
      v-else-if="frontmatter.layout === 'showcase'"
      class="max-w-[1440px] w-full h-full grow px-6"
    >
      <Showcase />
    </div>

    <div
      v-else
      class="max-w-[1440px] w-full h-full grow px-6"
    >
      <Docs />
    </div>
  </div>
</template>
